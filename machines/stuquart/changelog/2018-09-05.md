# 2018-09-05: How to Move On (Without Actually Moving)

I have an old 500GB 2.5-inch hard drive that I used some years ago to run Windows 8 on my desktop (because the drive was on sale for cheaper than any desktop drive or something like that).

Today, I'd like to have a clean installation of Windows 10 that I can boot from an UEFI machine, so I'm going to take that Windows 8 installation and see if I can juggle some drive characteristics and the Windows 10 install media and get that BIOS/MBR Windows 8 installation upgraded to an EFI/GPT Windows 10 installation (it's cool, I have multiple legitimate Windows 8 keys).

Before I do any of this, because I don't actually want to lose any data from my old Windows 8 installation (though I'm also not such a fool that I intend to *actually upgrade* the Windows 8 installation - I will, of course, try as hard as I can to start the Windows 10 installation from scratch), I have imaged the entire drive, so that, in the worst-case scenario where I completely botch everything, I can still revert to the way things were. (See the stushiba changelog for 2018-09-03.)

With that out of the way...

## converting the drive from MBR to GPT

I looked into it, and Windows can really only work off of a GPT if the drive it's installing to is already formatted as GPT going in, so the first change I'm making to the disk is to convert that Master Boot Record it had from back in the Win8 days to a GUID Partition Table. Looking at [the ArchWiki documentation on this](https://wiki.archlinux.org/index.php/Gdisk#Convert_between_MBR_and_GPT), I run this command (from stushiba, the machine where the disk is currently physically mounted, and where I did the initial imaging a couple days ago):

`sudo sgdisk -g /dev/sdb`

The operation has completed successfully. (`sudo blkid /dev/sdb` shows `PTTYPE="gpt"`)

With this out of the way, I'm going to reboot the system and see if the Windows installation media can put Windows 10 on that drive (or if it complains about seeing a different drive that already has Windows 10 on it, meaning that I would need to continue with the original plan to move the disk over to stuzzy first).

## oh wait yeah

I'm going to need the product key to install this: while I have two Windows 8 keys, I can't remember which one I used to install stutendo (I'd guess it's the older one, but I can't remember for certain). I reboot back into stutendo (I was able to boot the Win10 installation media, but only after moving the flash drive from my USB hub to a direct-to-case port), then run NirSoft ProduKey to recover the key used to install Windows here.

The key ProduKey displays doesn't match *any* of my Windows 8 keys, so I'm just going to hop back to the install media, try the newer Windows 8's key, and cross my fingers and hope everything goes fine.

### a brief aside

I remember having some trouble with this installation a while back, and after leafing through my Windows 8 install media, I remembered what it was: Microsoft was trying to sell Windows 8.1 as a paid upgrade IIRC (or at least one you needed a separate key for), and I'd tried to install Windows 8.1 directly to this partition, and I think I had to jump through a bunch of hoops (including using a special fixed key for installing Windows 8.1 that I had written by had) to get it to work (and I might have ultimately just had to make a fresh Windows 8 install that I then upgraded to 8.1 using that key, I don't remember).

## installing Win10

Okay, so, when the prompt for the key came up, I entered the newer Win8 key, and after a few seconds it advanced to the EULA without complaint, so I guess that works. (Low-key, what I think the installer is coded to do is, if a user inputs a valid Win8 key, it goes out and uses that to provision a brand-new Win10 key, hence what I saw from the NirSoft thing where my Win10 key wasn't either of the Win8 keys.)

Once that was past, I deleted both of the existing partitions on the 500GB disk in the installer, then selected the item for "Drive 1: Unallocated space"

## argh

After it was taking a while to load files, I went up to go to the bathroom, and when I came back the system had powered down, and wouldn't come back on the new installation.

I can't find the new installation as a UEFI boot option, so that's something I'll try fixing later, but for now (because Microsoft's "boot repair" can be really invasive and clobbery), I'm going to try booting into the install media, clicking the "Repair" option, and clicking the "Use another operating system" thing.

This presents me with two choices: both are listed as "Windows 10", one "On volume 13" and one "On volume 6". It doesn't distinguish which of these is which, and going into a command window and running `list volume` didn't bring back a numbering that would suggest a connection to these numbers, so because I have an appointment in a few minutes, I'm going to try "On volume 13" and see if that boots me into stutendo (which is what I want right now - I'll come back and retry with Volume 6 later).

After rebooting, it starts out with the "Just a moment..." spinner, so it looks like Volume 13 was actually the new installation, whoops. I'll have to do my appointment via a Chromebook while this install continues.

I log in with my Microsoft account at this point (IIRC).

It demanded I give the system a PIN (even though I don't want to) so, sigh, I use a 12-digit number I can hopefully change later

now it's trying to snake into my phone. I'll "Do it later".

it's bringing up the OneDrive stuff... ugh, I said the words "ok" in my appointment, and Cortana heard that to approve this step. Ugh, whatever.

Now it's asking me to "Make Cortana your personal assistant?" Oh HELL no.

On all these default-on switches that I'm pretty sure constitute GDPR violations, I'm turning off "Speech recognition" (separate from Cortana for some reason?), "Find my device", and "Ad ID". The rest have me to overwhelmed to consider (which is, of course, the entire point of deploying this dark pattern, fatiguing the user with guilt until they give in and stop bothering to toggle things, which is, again, why I'm pretty sure why the GDPR has provisions against it).

When Edge pops up, of course the first thing I do is type "Google Chrome"... and it disappears after installing the AMD Display driver for my desktop, then reading my Vive as a monitor it should move the Edge window to.

Ugh, I open up Display Settings by right-clicking the desktop and it *still* opens on the Vive. I use Win+arrow keys to Snap the window to the current monitor, then go down to the "Multiple displays" section and select "Show only on 2".

## installing Google Chrome

hahaha there's a big stupid ugly banner on Bing that shills Edge as "the better, stronger, smarter and more attractive browser that's already installed on your new PC, look we have Cortana, only an idiot would use something else", and, like, oh my god Microsoft do your analytics indicate that people actually fall for this

OH MY FUCKING GOD it is SO NEEDY when you ditch Edge, it KEEPS BEGGING you not to change the default browser like "No, wait, one last, just, please, pleeeease try Edge". After I've already installed Chrome. imagine if these people still had the monopoly they're so transparently insecure without, lol

Pinning Chrome to the taskbar and unpinning Edge, obviously

## more Windows shell changes

Right clicking the "Type here to search", going to "Cortana" and selecting "Hidden" to remove the search box

## setting the machine name

Since I was never prompted to name the machine in Setup, and I would like to do that, I'm hitting Win+Pause, clicking "Change settings" under "Computer name, domain, and workgroup settings", clicking the "Change..." button, and replacing the default "DESKTOP-22V5JKS" with "stuquart".

It tells me I'm going to need to restart to apply these changes, so I power down so I can test this drive booting on stuzzy (and recover/set up the UEFI boot stuff if I can't).

## pulling the drive

I take the drive bay out of my desktop's chassis, remove the mounting screws (this bay has convenience mounts, but only for full-size drives), wipe off the *copious* amount of dust, and, after dressing the drive in the ceremonial silicone garb that came with the drive enclosure, replace the old storage chip from stuzzy with the drive that currently has stuquart installed.

## booting stutendo

Powering the desktop system back up (and not touching anything) shows a Windows blue screen error, so I go back into BIOS and set it so that it uses rEFInd by default.

Trying to boot Windows from rEFInd indicates that the Windows boot has been messed up, just like before, so I try hitting F9 to "boot into a different Operating System": this reboots for a while, then presents me with a selection of "Windows 10" (with no listing of what volume it's on), and "Windows 10 On volume 4", which I'm assuming is stutendo. I click below, on "Change defaults or choose other options".

On the next screen, I click "Choose a default operating system", then "Windows 10 On volume 4". That kicks me back to the Options menu again, so I click "Choose other options", then "Troubleshoot" and "Advanced options", "See more recovery options", and "Startup Settings", which just tells me I can change startup settings from within Windows.

Since none of these appear to be a simple "Remove obsolete boot entries" option, I back out a few times and click "Continue" to "Exit and continue to Windows 10 (on volume 4)".

After a while, this does boot stutendo: I unlock it and reboot, to see what'll happen now.

As expected, it comes back up through rEFInd, which autoboots the Windows option after timeout, which comes back to the OS selection screen, which now defaults to stutendo (but waits an additional 30 seconds).

I'll want to fix all this, but it'll be logged within the changelog for stutendo from this point forward.

## booting stuquart

I set the drive up and plug it into a USB port on stuzzy, then power down stuzzy to see if I can boot into stuquart (or if I need to mess with the EFI boot stuff, which I'm afraid I might have to do, especially seeing as how the Windows installer appears to have installed for a configuration that assumed the ESP for stushiba/stutendo would be sufficient).
