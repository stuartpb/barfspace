# The Mark I Iteration 2 Model: Recovery-First

The first iteration of this system fell apart for two distinct reasons:

- The <16GiB of on-board storage isn't enough to hold scratch overlays and images at load.
- k3os is not good at stopping for maintenance.

As such, this iteration will be architected slightly differently:

- All of the on-board storage will be formatted as one big FAT32 ESP /boot for recovery.
  - GRUB2 will be installed here.
  - The ISO for SystemRecoveryCD will be placed here, along with a menu entry to load it into RAM.
- k3os will be installed to the 64 gig USB media from the recovery CD environment, and set as the default in Coreboot
  - The "core" configuration YAML will only include my GitHub SSH identity and the name of the node.
  - Other config extensions (ie. flags, NTP servers) will be written directly to /var/lib/rancher/k3os/config.yaml before first boot.
  - connman for the Wi-Fi can be set up at some point after startup by SSHing into the Ethernet interface.

## Before / Enacting this

[Backing Up and Taking Off](8389d53d-3d17-4ff9-aa20-2a68974339ff.md)

## After this

- [Studtop Mk II Rebuilding Plan](9e684107-b6e6-4ef5-9541-41db74ccf19c.md)
  - Welp, that didn't work
- [K3OS Alternatives in an Emergency](7acaea2b-b704-4a10-96cf-ceea9de22871.md)
- [More Flexible Definitions for Longhorn-Friendly Volumes](87c95439-3bc7-4047-8c31-19a58058cbe8.md)
