# 2018-09-08

`sudo pacman -Syu`, because I'm about to do a bunch of package installations

## Clipboard

I was thinking about setting up some scripts that would make writing these logs a little easier, and part of that would involve copying commands to the clipboard, so I read up on https://wiki.archlinux.org/index.php/Clipboard and, dang, I didn't know I needed a clipboard manager just to persist clipboard contents after closing the app the text was copied from.

Gpaste looks good, and xclip and xsel look pretty much interchangeable, so I went ahead and `sudo pacman -S gpaste xclip xsel`, then run `gpaste-client settings` and enable the gnome-shell extension (though I can't tell where it is) and syncing the extension's state with the daemon's.

The extension isn't showing up: I'm not sure if that's something that'll happen after I reboot or what.

## Other missing core stuff

I just realized the reason I haven't been able to open links from Atom is because I don't have `xdg-open` because nothing I've installed listed `xdg-utils` as a dependency, so I go ahead and `sudo pacman -S xdg-utils`

I also run `sudo pacman -S --asdeps perl-file-mimeinfo perl-net-dbus perl-x11-protocol` for the optional deps

## Profile structure

Added `[[ -f ~/.profile ]] && . ~/.profile` as a line to `~/.bash_profile`, right before the final line of the same structure that sources .bashrc if it exists.

Going forward, I will be putting all of my environment configuration into `~/.profile`, unless it is shell-specific, in which case I will use the shell's specific profile file.

I don't have any cross-shell interactive tweaks I feel like making right now, but if I choose to do so later (for instance, making the `alias ls='ls --color=auto'` line apply cross-shell, and/or turning it into `export LS_OPTIONS='--color=auto'`), I'm thinking I'll create a `.shirc` file that I'll source from `.bashrc` (and other shells' equivalents).

The legacy changelog for 2013-07-04 on sturling mk 1 was informative here, as were:

- https://serverfault.com/questions/261802/what-are-the-functional-differences-between-profile-bash-profile-and-bashrc
- https://stackoverflow.com/questions/415403/whats-the-difference-between-bashrc-bash-profile-and-environment
- https://wiki.archlinux.org/index.php/Bash#Configuration_files

## Adding local bin to PATH

Following the profile configuration described above, I create my `~/.profile` with `echo 'export PATH=$HOME/.local/bin:$PATH' >> ~/.profile`, which will allow me to override globally-installed binaries from my user dir (this is also not a bad way to do aliases)

## Bash interactive convenience function

Adding `mkcd () { mkdir -p $1 && cd $1; }` to the bottom of my `~/.bashrc`

## Making readline's tab completion a little smoother

Creating a `.inputrc` with two lines:

```
set show-all-if-ambiguous on
set completion-ignore-case on
```

The first came from https://wiki.archlinux.org/index.php/Readline, while the latter came I think from the page on Bash completion (though I actually ganked it from the aforementioned legacy sturling changelog).

To adopt this in the terminal I already have open, I run `bind -f  ~/.inputrc`.

## Wifi Hacking

I've been thinking I might like to run some experiments that would involve turning the machine into a hotspot:

https://wiki.archlinux.org/index.php/Software_access_point

So the first thing here is to run `sudo pacman -S iw`

Okay, it looks like my hardware can support it, that's all I really want to know for now - I can revisit this later.

## NodeMCU

I've been meaning to program this NodeMCU dev kit I got about ten months ago, but I haven't had a really suitable system to hack on it until now (I had tried it with stukilla on 2018-12-02 and 2018-12-04, but ended up running into issues, hence why I was originally going to build stuzzy as "stukilla mk 2").

When I was originally experimenting with all this, I was trying to work with whatever the chip came flashed with, since I fgured it had only been a month and whatever it came with as stock was probably fine: however, looking at the options on https://nodemcu-build.com/ for additional modules, and how long it's been by this point, and how I was never able to get the stock firmware to work, I'm going to trigger a custom build from that page (selecting `bit bloom color_utils crypto encoder file gpio http net node sjson spi struct tmr uart websocket wifi` along with TLS and FAT support, since I've got 4 megs to play with, I'd like to use HTTPS where I can, and I do have an SD card reader) and try to load that onto the chip (while seeing if I can pull the shipping firmware off of it as the build processes).

First, I install pip via `sudo pacman -S python-pip`, then `pip install esptool --user`

Then, I try to get info on my chip with `esptool.py flash_id`, but I get permission denied reading `/dev/ttyUSB0`, so, between https://github.com/espressif/esptool#serial-port and https://wiki.archlinux.org/index.php/users_and_groups#Group_list, I do `sudo usermod -aG uucp stuart`, then restart (since I have to log out to apply the change anyway).

## GNOME

Turned off the annoying drop sound when trying to navigate past end-of-input with `gsettings set org.gnome.desktop.wm.preferences audible-bell false` (found via https://wiki.archlinux.org/index.php/PC_speaker#GNOME)
