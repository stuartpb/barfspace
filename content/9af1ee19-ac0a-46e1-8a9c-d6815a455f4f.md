# Studtop Mark I

The cluster under Studtop Mk 1 was a standard k3os installation, written directly to the internal storage of a (warranty-voided) Toshiba Chromebook 2.

## State of the Cluster at Termination

- A static hostname has been set.
- My GitHub user has ssh key access.
- Deployment of servicelb is disabled, and `metallb` is installed.
- kubernetes-dashboard and kubeapps are installed.
  - The cluster name has been set to "Stubernetes" in the dashboard.
- The native `coredns` manifest has been replaced with a similar `cluster-dns`.
  - A stub manifest exists to recreate the `coredns` ConfigMap, to support k3s's "NodeHosts" item.
- The native local-volume-provisioner has been disabled and Longhorn has been installed from its Helm chart.
  - A udev rule to automount partitons with a specific UUID is added in config.yaml.
- The native `traefik` ingress has been replaced with a `household-ingress` app (based on Traefik's own Helm charts for Traefik 2) in `household-system`.
- The stable/prometheus-operator chart has been installed with default values.

Other things that were in progress:

- A couple Longhorn rules had been specified for storage classes that were expected to be in use.
- A few PersistentVolumes were in place

the [State of the Cluster](a4389025-9425-4fe1-ab3b-8d086bce6a13.md) almost described the complete-rebuild of this K3OS system, but after that failed and we went to Kubic it ceased to matter.

## Other buried pages from this generation

Pages going down with the ship, to be salvaged later by their successors:

- [the Mk1 Notestack Household Workspace](67826054-ed26-41e6-80c9-5d677e6a8cba.md)
- [Planning and Exploration](9ac503ed-a6d8-4fc3-996b-d1e94d18e139.md)

## Logs

- 2019-08-14: [operation](7c4b615a-033c-4230-97f7-0e91139b5c9a.md)
- 2020-02-28:
  - [creation](c83c7062-d45b-411b-9420-0db45f85be2b.md)
  - [ranching](8feab719-bfad-45ac-938e-3ccb9f8c9e72.md)
  - [dashboard confession](45fb7e26-f342-4cd3-814c-5e9ac43af602.md)
- 2020-03-04: [disabling wifi](8e14bac7-619e-42a3-9730-8355005383c5.md)
- 2020-03-05: [the new plan](aea5717c-3578-4b53-a070-7677e36b1d04.md)
  - [first steps: switching to MetalLB](27f5f508-d869-4292-9036-30fc0ccaf014.md)
- 2020-03-06:
  - [setting up cluster access on stushiba](b9a55188-647f-4cd0-ab69-6df7e25ccb24.md)
- 2020-03-19: [setting up address.exposed](07e52fe5-91ae-4f98-a565-dcf10e3232c2.md)
- 2020-03-31: [executing](515478b1-74db-434c-9949-1053d46aa653.md)
  - this is where I ran into a couple enormous hitches and petered off for a month and a half
- mid-May 2020: [latest shenanigans](de490ea9-f480-4e03-a671-0d1173753c53.md)
  - [Sprint summary](40c69f2f-1c10-4ae6-a40b-cdd74c8e26bf.md)
- 2020-05-20 or so:
  - [Cloning the bulk disk's old content away in the dumbest way possible](50db1a39-be99-42ff-ab74-ab0661d0ca2d.md)
  - [getting the cluster info into Git](a66292a0-b50c-42ac-971b-5cc23cf6e91a.md)
- 2020-05-23:
  - [formatting the disk](d5d05f3d-21b7-4445-ac6b-8d0e3f483f37.md)
  - [fixing cluster-dns](38a68c9c-c6af-43a8-a24c-2d2300528464.md)
  - [in which we actually do the thing we meant to do all week](965ae40d-d67d-4adc-aef6-727290dc44c4.md)
- 2020-05-24: [Things to Do in Kubernetes When You're Done Fucking with Longhorn](3bfb1a24-ca82-41f0-a2b0-fa8a0ba7d8b8.md)
  - [setting up an ingress](3758cf1a-01a7-4529-8344-9f4e621eb8c7.md)
- 2020-05-26: created the [household-workspaces](98583255-8ee5-4d4d-aade-92dbdde01f63.md) namespace
- 2020-05-27: [The SkyDNS half of household-dns](598de530-7e33-44eb-83ce-e15edf3a5405.md)
- 2020-05-28:
  - [Finishing the CoreDNS half](84be6927-2ff2-461b-9078-86d31e9f3509.md)
  - [Making it work](219b93f6-2ec1-4c82-9d8b-e2919417cbb3.md)
    - fixing MetalLB issues caused by k3os's redeployment
    - reverting etcd's rbac
    - starting the router rollout
- 2020-05-29: [o brave new world, that has such servers in't(ernal)](62dd6ff2-2f9b-410c-ab05-0c11abcca74b.md)
- 2020-05-31: [let's make this simple](fe1f8446-6298-42b3-a0ad-da51295a4ebe.md)
- 2020-06-01:
  - [dialing back household-dns for the moment](b732fb93-07d4-4ca1-a0e1-306e4ac98a35.md)
  - [installing prometheus-operator](45ec0eb8-05e7-474d-ad8e-3153c23b4daf.md)
  - [fixing the server clock](a55d7878-a29b-4cef-a151-4cfd765ebb88.md), ooh wee
  - [Persistent Storage to Make the Workspace Work](54250980-bf8c-43a7-a028-d838467bbb33.md)
- 2020-06-03:
  - [We have self-hosting notes, repeat, we have self-hosting notes](1558a75c-b543-452d-a119-d584595479ab.md)
  - [USB peripheral FAIL](86357bd3-3773-4f91-bc47-1aa9c04e5a16.md)
- 2020-06-04:
  - PLAN START: [adding more space](e592bf80-3dd2-4689-934f-2374a487308d.md)
    - this was what killed the installation, pretty much
- 2020-06-05:
  - PLAN START: [Upgrading the Prometheus Operator Chart](fd75a490-63d2-4736-a3e3-a6cad0634d5d.md)
    - aborted due to failure of container-opt move
- 2020-06-07:
  - [The Plan for Introducing the containerd-opt Flash Drive](c8dc2bdd-4e39-4b37-88c5-dc1d29415557.md)

