# lumpkin

A CLI bulk mailer. Reads recipients from a CSV, then sends them the message defined in a file via SMTP.

https://github.com/stuartpb/lumpkin

## To-do-later features

Template formatting:

- JS template-string (`${}`) / "EJS" syntax
  - maybe as hyperHTML to allow for HTML formatting where the user opted into it without
- Pug
- Handlebars or hogan or magnum or whatever
- MailChimp / whatever ESP formatting with `%%Percents%%`
  - This is also, what, Windows templating? Batch echo? Visual Basic?
- Shell-quote syntax (though that's pretty much just the JS syntax with optional braces)
- Go template syntax?
- Maybe just a "gimme the kv pairs as CSV with two rows and here's the command to run" or something so people can write it in Lua or M4 or whatever, then we buffer it from stream

Markdownification:

- Templates can probably handle the "insert content Markdown here" pattern
  - maybe taking blocks by heading, even? or there can be a template for Markdown and HTML layout separately, both taking pieces from separate Markdown files? Anyway)
- But for situations like what I'm doing right now, what I'd want would be an autogeneration *of Markdown from the HTML input*.
  - And I'm thinking there are ways to do this automatically, especially if we permit selectors for *which node to transcribe*
    - a thought I'm having here would be "normalize headings", ie highest-level becomes h1
      - I think this is an existing feature of something, like, in the HTML Outlining spec?
    - You'd probably want to preview it, and maybe just manually edit it by outputting it, then reusing it as an input file
      - So what we're saying is lumpkin is probably going to do double-duty as a rewriting toolchain processor
- Also, editors having a "turn this crap into plain Markdown, then back to HTML" mode would be a cool, smooth way to get rid of meaningless-font-switches and crap
 - especially with a "turn this into interpreted Markdown into HTML" mode for when I use asterisks for emphasis in a WYSIWYG editor

Sending:

- DKIM? https://nodemailer.com/dkim/
  - I feel like the ESP is expected to handle DKIM?
  - Maybe this can be added as a feature for providers that don't do this sort of DKIM integration
  - And maybe there can be helper commands for generating a keypair and DNS entries?

## ES Modules style

I tried to do this, but the need for a flag, plus the [troubles around ESM in binaries](https://github.com/nodejs/modules/issues/152), made me decide to pass up [my own best practices](594f5a88-fda2-4a09-aebf-066c7f0a3ff0.md) and stick with implicit-cjs for everything. (Those will become best practices once the flag is unnecessary.)

I considered https://github.com/standard-things/esm
